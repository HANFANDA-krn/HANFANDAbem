:root{
  --bg: #050912;
  --surface: rgba(13,18,28,0.9);
  --surface-strong: rgba(16,22,34,0.95);
  --text: #e7ecf5;
  --muted: #9aa3b9;
  --accent: #58b1ff;
  --line: rgba(255,255,255,0.08);
  --radius-xl: 20px;
  --radius: 14px;
  --shadow: 0 18px 40px rgba(5,9,20,0.45);
  font-size: 16px;
}

*{ box-sizing:border-box; margin:0; }
body{
  font-family:"Plus Jakarta Sans",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:radial-gradient(140% 120% at 0 -20%,rgba(60,110,255,0.25) 0%,var(--bg) 45%);
  color:var(--text);
  min-height:100vh;
}
a{ color:inherit; }

.container{ max-width:1180px; margin:0 auto; padding:0 20px; }

.site-header{
  position:sticky; top:0; z-index:20;
  padding:24px 0 18px;
  background:linear-gradient(180deg,rgba(10,14,24,.9),rgba(10,14,24,.65));
  backdrop-filter:blur(18px);
  border-bottom:1px solid var(--line);
  box-shadow:0 8px 28px rgba(5,9,20,.25);
}
.header-inner{ display:flex; flex-direction:column; gap:18px; }
.brand{ font:700 30px/1 "Space Grotesk",sans-serif; letter-spacing:.04em; }
.brand span{ display:block; font-size:16px; color:var(--muted); letter-spacing:.12em; text-transform:uppercase; margin-top:6px; }
.tagline{ color:var(--muted); max-width:70ch; }

.controls{ display:flex; flex-wrap:wrap; gap:14px; align-items:flex-end; }
.control{ display:flex; flex-direction:column; gap:6px; color:var(--muted); font-size:13px; text-transform:uppercase; letter-spacing:.12em; font-weight:700; }
.control input, .control select{
  width:220px; padding:12px 14px; border-radius:var(--radius); border:1px solid var(--line);
  background:var(--surface); color:var(--text); font:600 15px/1.4 "Plus Jakarta Sans",sans-serif; outline:none;
}
.control input::placeholder{ color:rgba(231,236,245,.45); }
.country-input{ display:flex; align-items:center; gap:8px; }
.country-input select{ width:200px; }
.clear-btn{
  width:36px; height:36px; border-radius:12px; border:1px solid var(--line); background:rgba(255,255,255,.08); color:var(--text);
  display:grid; place-items:center; cursor:pointer; font-size:18px;
}

.toggles{ flex-direction:row; align-items:center; gap:12px; }
.toggles label{ display:flex; align-items:center; gap:6px; font:600 13px/1 "Plus Jakarta Sans"; text-transform:none; letter-spacing:0; color:var(--text); }

.btn{
  padding:12px 18px; border-radius:var(--radius); border:1px solid rgba(88,177,255,.45);
  background:linear-gradient(135deg,rgba(88,177,255,.28),rgba(88,177,255,.14));
  color:var(--text); font-weight:700; cursor:pointer; box-shadow:0 15px 30px rgba(88,177,255,.25);
}
.btn.ghost{ border:1px solid var(--line); background:rgba(255,255,255,.05); box-shadow:none; }

.main{ padding:26px 0 60px; display:grid; gap:22px; }

.map-wrapper{ position:relative; }
#map{
  height:600px; width:100%;
  border-radius:var(--radius-xl);
  border:1px solid var(--line);
  background:#0c1222;
  box-shadow:var(--shadow);
  overflow:hidden;
}
.leaflet-control-attribution{ background:rgba(9,13,22,.6)!important; color:#c7d3f1!important; border-top-left-radius:10px; border-top-right-radius:10px; }
.legend{
  position:absolute; left:16px; bottom:16px; display:flex; gap:12px; flex-wrap:wrap;
  background:var(--surface-strong); padding:10px 12px; border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow);
  font-size:13px; color:#d5ddf5;
}
.swatch{ width:16px; height:16px; border-radius:50%; display:inline-block; margin-right:6px; border:1px solid rgba(255,255,255,.24); }
.swatch.marker{ background:#f7c948; }
.swatch.range{ background:rgba(88,177,255,.3); }

.statusbar{
  display:flex; justify-content:space-between; align-items:center; gap:12px;
  background:var(--surface-strong); padding:12px 16px; border-radius: var(--radius-xl); border:1px solid var(--line);
}
.mono{ font:700 12px/1.1 "Space Grotesk",monospace; letter-spacing:.16em; color:var(--muted); text-transform:uppercase; }
.chips{ display:flex; gap:10px; flex-wrap:wrap; }
.chip{
  display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; border:1px solid rgba(88,177,255,.45);
  background:rgba(88,177,255,.16); color:var(--text); font:600 11px/1 "Space Grotesk";
}
.chip.hidden{ display:none!important; }
.chip-x{
  all:unset; width:18px; height:18px; border-radius:50%; border:1px solid rgba(88,177,255,.45);
  display:grid; place-items:center; cursor:pointer; font-size:12px;
}

.grid{
  display:grid; gap:18px;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
}
.card{
  position:relative; border-radius:var(--radius-xl);
  background:linear-gradient(160deg,rgba(88,177,255,.12),rgba(12,18,30,.92));
  border:1px solid var(--line); box-shadow:var(--shadow);
  padding:18px; display:grid; gap:14px; cursor:pointer; transition:transform .18s ease;
}
.card:hover{ transform:translateY(-4px); }
.card-top{ display:flex; gap:14px; align-items:flex-start; }
.avatar{
  width:60px; height:60px; border-radius:16px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.18);
  display:grid; place-items:center; font-size:32px;
}
.avatar.lg{ width:76px; height:76px; font-size:40px; }
.title .name{ font:700 20px/1.2 "Space Grotesk"; }
.title .latin{ color:rgba(229,234,244,.6); font:600 13px/1.2 "Space Grotesk"; }
.meta{ display:flex; gap:10px; flex-wrap:wrap; }
.meta .tag{
  background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15);
  border-radius:12px; padding:6px 10px; font:600 11px/1 "Space Grotesk"; letter-spacing:.06em; text-transform:uppercase; color:#dbe4ff;
}
.desc{ color:var(--muted); }
.stats{ display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
.kv{
  background:rgba(255,255,255,.05); border:1px solid var(--line);
  border-radius:12px; padding:8px 10px; display:grid; gap:6px;
}
.kv .k{ font:700 11px/1 "Space Grotesk"; letter-spacing:.08em; text-transform:uppercase; color:rgba(229,234,244,.65); }
.kv .v{ font-weight:700; }
.card .focus-btn{
  position:absolute; right:12px; bottom:12px; width:38px; height:38px;
  border-radius:12px; border:1px solid var(--line); background:rgba(255,255,255,.08); color:var(--text);
  display:grid; place-items:center; font-size:18px;
}

.empty{ display:grid; place-items:center; }
.empty-card{
  text-align:center; padding:32px; border-radius:var(--radius-xl);
  border:1px solid var(--line); background:rgba(255,255,255,.05);
  max-width:420px; width:100%; display:grid; gap:12px; box-shadow:var(--shadow);
}
.empty .emoji{ font-size:48px; }

.site-footer{ padding:30px 0; border-top:1px solid var(--line); background:rgba(12,17,28,.6); }
.foot-inner{ color:var(--muted); }

.modal.hidden{ display:none; }
.modal{ position:fixed; inset:0; z-index:120; }
.modal-backdrop{ position:absolute; inset:0; background:rgba(5,9,18,.65); }
.modal-panel{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width:min(880px, calc(100% - 28px));
  background:var(--surface-strong); border:1px solid var(--line); border-radius:var(--radius-xl); box-shadow:var(--shadow);
}
.modal-close{
  position:absolute; top:12px; right:12px; width:40px; height:40px; border-radius:12px;
  border:1px solid var(--line); background:rgba(255,255,255,.08); color:var(--text); font-size:24px; cursor:pointer;
}
.modal-content{ padding:24px; display:grid; gap:16px; }
.modal-hero{ display:flex; gap:16px; align-items:center; }
.modal-title{ margin:0; font:700 26px/1.2 "Space Grotesk"; }
.modal-grid{ display:grid; gap:12px; grid-template-columns:repeat(3,1fr); }
.facts-list{ margin:0; padding-left:20px; display:grid; gap:6px; color:var(--text); }

.toast{ position:fixed; left:50%; bottom:20px; transform:translateX(-50%); background:rgba(9,13,22,.95); border:1px solid var(--line);
  padding:12px 16px; border-radius:var(--radius); color:var(--text); box-shadow:var(--shadow); opacity:0; transition:.18s ease opacity;
}
.toast.show{ opacity:1; }
.toast.hidden{ display:none; }

.hidden{ display:none!important; }

/* Responsif */
@media (max-width:900px){
  .controls{ grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); }
  .control input, .control select{ width:100%; }
  #map{ height:480px; }
  .modal-grid{ grid-template-columns:repeat(2,1fr); }
}
@media (max-width:640px){
  #map{ height:420px; }
  .modal-grid{ grid-template-columns:1fr; }
}
